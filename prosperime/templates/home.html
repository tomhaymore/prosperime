{% extends "base_full.html" %}

{% block head %}

<link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/discover.css" />
<script type="text/javascript" src="{{ STATIC_URL }}js/discover.js"></script>
{% endblock %}

{% block content %}

<div id="content-container" class="main-container">
	<!-- <div class="pull-left">
		<img src="/media/{{user.profile.default_profile_pic}}">
	</div> -->
	<div class="pull-left dashboard-header">
		<p class="splash-header">Dashboard</p>
		<ul class="module-list main-sub-header">
			<li><a href="/profile/{{user.id}}">View profile</a></li>
			<li><a href="/discover">Discover careers</a></li>
			<li><a href="/search/">Search</a></li>
			{% if not user.profile.li_linked %}
				<li><a href="/account/authorize">Authorize</a></li>
			{% endif %}
		</ul>
	</div>
	<div class="clear"></div>
	<div class="dashboard-module pull-left" data-name="dashboard-careers">
		<p class="module-header">My Careers
			<span class='module-whats-this'><a onclick="whatsThis('careers', this.parentNode.parentNode)">What's this?</a></span>
		</p>

			{% if user_careers %}
				<table class="table table-striped table-condensed table-bordered" data-name="careers-list">

				{% for c in user_careers %}
					<tr><td>
						<a href="/discover/career/{{c.id}}">{{c.name}}</a>
					</td></tr>
				{% endfor %}
				<tr><td class="bolder">
						<a href="/discover/">Discover more careers</a>
					</td></tr>
				</table>
			{% endif %}
		<!--<p class="sub-header"><a href="/discover">Discover more careers</a></p>-->
	</div>
	<div class="dashboard-module pull-left" data-name="dashboard-saved-paths">
		<p class="module-header">Saved Paths</p>
		{% if saved_paths %} 
			<table class="table table-striped table-condensed table-bordered" data-name="saved-paths-list">
				<tr><td class="bolder">
					<a href="/saved_paths/">View All</a>
				</td><tr>
			{% for s in saved_paths %}
				<tr><td>
					<a href="/saved_paths/#id/?id={{s.id}}">{{s.title}}</a> 
					<span class="badge">{{s.positions|length}}</span>
				</td></tr>
			{% endfor %}
			</table>
		{% else %}
			<p>You don't have any saved paths. <a href="#">Add one now</a>.</p>
		{% endif %}
	</div>
	<div class="dashboard-module pull-left" data-name="dashboard-top-careers">
		<p class="module-header">Top Careers in Network</p>
		{% if top_careers %} 
			<ul data-name="top-careers-list">
			{% for c in top_careers %}
				<li><a href="/discover/career/{{c.id}}">{{c.name}}</a></li>
			{% endfor %}
			</ul>
		{% else %}
			<p>Coming soon</p>
		{% endif %}
	</div>
	<div class="clear"></div>
</div>


<script type="text/javascript">

	var whatsThis = function(origin, elem) {
		
		if (origin == "careers") {
			// If its already there, delete it
			if ($('#module-info-careers').length > 0) {
				$('#module-info-careers').remove()
				return true;
			}
			
			// Else, delete everything else
			$('.module-info').each(function() {
				$(this).remove()
			});

			$(elem).after("<p id='module-info-careers' class='module-info'>We've checked out your body of work as well that of the rest of Prosperime community. Using this data, we have selected the following as potential career fields for you. Because our goal is to help you find a meaningful career, we have collected information on the people, companies, and jobs within each.</p>")

		}
	};

</script>

{% endblock %}